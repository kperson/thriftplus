//
//  {{service_name}}Client+Async.m
//
//  AutoGenerated using iOS Thrift Async {{version}}
//  http://github.com/kperson/thriftplus
//  DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
//  @generated
//
//

#import "{{service_name}}Client+Async.h"

@implementation {{service_name}}Client (Async)
    
{{#functions}}
{{signature}} {
    @try{
        NSOperationQueue *asyncQueue = [[NSOperationQueue alloc] init];
        [asyncQueue setMaxConcurrentOperationCount:1];
        [asyncQueue addOperationWithBlock:^(void) {   

        {{#has_return_var}}
            {{return_var}} = {{method_call}};
        {{/has_return_var}}
        {{^has_return_var}}
            {{method_call}};
        {{/has_return_var}}  
            if(completionBlock) {  
                NSOperationQueue *mainQueue = [NSOperationQueue mainQueue];
                [mainQueue addOperationWithBlock:^(void) {
        {{#has_return_var}}
                
                    completionBlock(results);
        {{/has_return_var}}
        {{^has_return_var}}
                
                    completionBlock();
        {{/has_return_var}}   
                }];
            }
        }];
    }
{{#exceptions}}
    @catch({{exception_type}} *exception) {
        if({{exception_name}}) {
            NSOperationQueue *mainQueue = [NSOperationQueue mainQueue];
            [mainQueue addOperationWithBlock:^(void) {
                {{exception_name}}(exception);
            }];
        }
    }
  {{/exceptions}}
}

{{/functions}}
@end